jQuery.extend({highlight:function(r,i,l,m){if(r.nodeType===3){var o=r.data.match(i);if(o){var q=document.createElement(l||"span");q.className=m||"highlight";var k=r.splitText(o.index);k.splitText(o[0].length);var n=k.cloneNode(true);q.appendChild(n);k.parentNode.replaceChild(q,k);return 1}}else{if((r.nodeType===1&&r.childNodes)&&!/(script|style)/i.test(r.tagName)&&!(r.tagName===l.toUpperCase()&&r.className===m)){for(var p=0;p<r.childNodes.length;p++){p+=jQuery.highlight(r.childNodes[p],i,l,m)}}}return 0}});jQuery.fn.unhighlight=function(d){var c={className:"highlight",element:"span"};jQuery.extend(c,d);return this.find(c.element+"."+c.className).each(function(){var a=this.parentNode;a.replaceChild(this.firstChild,this);a.normalize()}).end()};jQuery.fn.highlight=function(i,g){var k={className:"highlight",element:"span",caseSensitive:false,wordsOnly:false};jQuery.extend(k,g);if(i.constructor===String){i=[i]}i=jQuery.grep(i,function(a,b){return a!=""});if(i.length==0){return this}var h=k.caseSensitive?"":"i";var j="("+i.join("|")+")";if(k.wordsOnly){j="\\b"+j+"\\b"}var l=new RegExp(j,h);return this.each(function(){jQuery.highlight(this,l,k.element,k.className)})};jQuery.cookie=function(w,p,i){if(typeof p!="undefined"){i=i||{};if(p===null){p="";i.expires=-1}var t="";if(i.expires&&(typeof i.expires=="number"||i.expires.toUTCString)){var s;if(typeof i.expires=="number"){s=new Date();s.setTime(s.getTime()+(i.expires*24*60*60*1000))}else{s=i.expires}t="; expires="+s.toUTCString()}var n=i.path?"; path="+(i.path):"";var r=i.domain?"; domain="+(i.domain):"";var x=i.secure?"; secure":"";document.cookie=[w,"=",encodeURIComponent(p),t,n,r,x].join("")}else{var u=null;if(document.cookie&&document.cookie!=""){var o=document.cookie.split(";");for(var q=0;q<o.length;q++){var v=jQuery.trim(o[q]);if(v.substring(0,w.length+1)==(w+"=")){u=decodeURIComponent(v.substring(w.length+1));break}}}return u}};(function(b){function c(f,g,d){return f>g&&g+d>f}function a(d){return/left|right/.test(d.css("float"))||/inline|table-cell/.test(d.css("display"))}b.widget("ui.sortable",b.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var d=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===d.axis||a(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var d=this.items.length-1;d>=0;d--){this.items[d].item.removeData(this.widgetName+"-item")}return this},_setOption:function(f,d){"disabled"===f?(this.options[f]=d,this.widget().toggleClass("ui-sortable-disabled",!!d)):b.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(h,f){var g=null,j=!1,d=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(h),b(h.target).parents().each(function(){return b.data(this,d.widgetName+"-item")===d?(g=b(this),!1):undefined}),b.data(h.target,d.widgetName+"-item")===d&&(g=b(h.target)),g?!this.options.handle||f||(b(this.options.handle,g).find("*").addBack().each(function(){this===h.target&&(j=!0)}),j)?(this.currentItem=g,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(h,f,g){var k,d,j=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(h),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},b.extend(this.offset,{click:{left:h.pageX-this.offset.left,top:h.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(h),this.originalPageX=h.pageX,this.originalPageY=h.pageY,j.cursorAt&&this._adjustOffsetFromHelper(j.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),j.containment&&this._setContainment(),j.cursor&&"auto"!==j.cursor&&(d=this.document.find("body"),this.storedCursor=d.css("cursor"),d.css("cursor",j.cursor),this.storedStylesheet=b("<style>*{ cursor: "+j.cursor+" !important; }</style>").appendTo(d)),j.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",j.opacity)),j.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",j.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",h,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!g){for(k=this.containers.length-1;k>=0;k--){this.containers[k]._trigger("activate",h,this._uiHash(this))}}return b.ui.ddmanager&&(b.ui.ddmanager.current=this),b.ui.ddmanager&&!j.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,h),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(h),!0},_mouseDrag:function(j){var f,g,l,d,k=this.options,h=!1;for(this.position=this._generatePosition(j),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-j.pageY<k.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+k.scrollSpeed:j.pageY-this.overflowOffset.top<k.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-k.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-j.pageX<k.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+k.scrollSpeed:j.pageX-this.overflowOffset.left<k.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-k.scrollSpeed)):(j.pageY-b(document).scrollTop()<k.scrollSensitivity?h=b(document).scrollTop(b(document).scrollTop()-k.scrollSpeed):b(window).height()-(j.pageY-b(document).scrollTop())<k.scrollSensitivity&&(h=b(document).scrollTop(b(document).scrollTop()+k.scrollSpeed)),j.pageX-b(document).scrollLeft()<k.scrollSensitivity?h=b(document).scrollLeft(b(document).scrollLeft()-k.scrollSpeed):b(window).width()-(j.pageX-b(document).scrollLeft())<k.scrollSensitivity&&(h=b(document).scrollLeft(b(document).scrollLeft()+k.scrollSpeed))),h!==!1&&b.ui.ddmanager&&!k.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,j)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),f=this.items.length-1;f>=0;f--){if(g=this.items[f],l=g.item[0],d=this._intersectsWithPointer(g),d&&g.instance===this.currentContainer&&l!==this.currentItem[0]&&this.placeholder[1===d?"next":"prev"]()[0]!==l&&!b.contains(this.placeholder[0],l)&&("semi-dynamic"===this.options.type?!b.contains(this.element[0],l):!0)){if(this.direction=1===d?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(g)){break}this._rearrange(j,g),this._trigger("change",j,this._uiHash());break}}return this._contactContainers(j),b.ui.ddmanager&&b.ui.ddmanager.drag(this,j),this._trigger("sort",j,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(h,f){if(h){if(b.ui.ddmanager&&!this.options.dropBehaviour&&b.ui.ddmanager.drop(this,h),this.options.revert){var g=this,k=this.placeholder.offset(),d=this.options.axis,j={};d&&"x"!==d||(j.left=k.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),d&&"y"!==d||(j.top=k.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,b(this.helper).animate(j,parseInt(this.options.revert,10)||500,function(){g._clear(h)})}else{this._clear(h,f)}return !1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var d=this.containers.length-1;d>=0;d--){this.containers[d]._trigger("deactivate",null,this._uiHash(this)),this.containers[d].containerCache.over&&(this.containers[d]._trigger("out",null,this._uiHash(this)),this.containers[d].containerCache.over=0)}}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),b.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?b(this.domPosition.prev).after(this.currentItem):b(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(g){var d=this._getItemsAsjQuery(g&&g.connected),f=[];return g=g||{},b(d).each(function(){var e=(b(g.item||this).attr(g.attribute||"id")||"").match(g.expression||/(.+)[\-=_](.+)/);e&&f.push((g.key||e[1]+"[]")+"="+(g.key&&g.expression?e[1]:e[2]))}),!f.length&&g.key&&f.push(g.key+"="),f.join("&")},toArray:function(g){var d=this._getItemsAsjQuery(g&&g.connected),f=[];return g=g||{},d.each(function(){f.push(b(g.item||this).attr(g.attribute||"id")||"")}),f},_intersectsWith:function(B){var w=this.positionAbs.left,q=w+this.helperProportions.width,C=this.positionAbs.top,k=C+this.helperProportions.height,z=B.left,j=z+B.width,f=B.top,v=f+B.height,m=this.offset.click.top,y=this.offset.click.left,A="x"===this.options.axis||C+m>f&&v>C+m,x="y"===this.options.axis||w+y>z&&j>w+y,g=A&&x;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>B[this.floating?"width":"height"]?g:w+this.helperProportions.width/2>z&&j>q-this.helperProportions.width/2&&C+this.helperProportions.height/2>f&&v>k-this.helperProportions.height/2},_intersectsWithPointer:function(f){var e="x"===this.options.axis||c(this.positionAbs.top+this.offset.click.top,f.top,f.height),g="y"===this.options.axis||c(this.positionAbs.left+this.offset.click.left,f.left,f.width),j=e&&g,d=this._getDragVerticalDirection(),h=this._getDragHorizontalDirection();return j?this.floating?h&&"right"===h||"down"===d?2:1:d&&("down"===d?2:1):!1},_intersectsWithSides:function(f){var e=c(this.positionAbs.top+this.offset.click.top,f.top+f.height/2,f.height),g=c(this.positionAbs.left+this.offset.click.left,f.left+f.width/2,f.width),h=this._getDragVerticalDirection(),d=this._getDragHorizontalDirection();return this.floating&&d?"right"===d&&g||"left"===d&&!g:h&&("down"===h&&e||"up"===h&&!e)},_getDragVerticalDirection:function(){var d=this.positionAbs.top-this.lastPositionAbs.top;return 0!==d&&(d>0?"down":"up")},_getDragHorizontalDirection:function(){var d=this.positionAbs.left-this.lastPositionAbs.left;return 0!==d&&(d>0?"right":"left")},refresh:function(d){return this._refreshItems(d),this.refreshPositions(),this},_connectWith:function(){var d=this.options;return d.connectWith.constructor===String?[d.connectWith]:d.connectWith},_getItemsAsjQuery:function(l){var f,j,p,d,m=[],k=[],g=this._connectWith();if(g&&l){for(f=g.length-1;f>=0;f--){for(p=b(g[f]),j=p.length-1;j>=0;j--){d=b.data(p[j],this.widgetFullName),d&&d!==this&&!d.options.disabled&&k.push([b.isFunction(d.options.items)?d.options.items.call(d.element):b(d.options.items,d.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),d])}}}for(k.push([b.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):b(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),f=k.length-1;f>=0;f--){k[f][0].each(function(){m.push(this)})}return b(m)},_removeCurrentsFromItems:function(){var d=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=b.grep(this.items,function(f){for(var e=0;d.length>e;e++){if(d[e]===f.item[0]){return !1}}return !0})},_refreshItems:function(q){this.items=[],this.containers=[this];var m,y,j,w,g,f,p,k,v=this.items,x=[[b.isFunction(this.options.items)?this.options.items.call(this.element[0],q,{item:this.currentItem}):b(this.options.items,this.element),this]],t=this._connectWith();if(t&&this.ready){for(m=t.length-1;m>=0;m--){for(j=b(t[m]),y=j.length-1;y>=0;y--){w=b.data(j[y],this.widgetFullName),w&&w!==this&&!w.options.disabled&&(x.push([b.isFunction(w.options.items)?w.options.items.call(w.element[0],q,{item:this.currentItem}):b(w.options.items,w.element),w]),this.containers.push(w))}}}for(m=x.length-1;m>=0;m--){for(g=x[m][1],f=x[m][0],y=0,k=f.length;k>y;y++){p=b(f[y]),p.data(this.widgetName+"-item",g),v.push({item:p,instance:g,width:0,height:0,left:0,top:0})}}},refreshPositions:function(h){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var f,g,j,d;for(f=this.items.length-1;f>=0;f--){g=this.items[f],g.instance!==this.currentContainer&&this.currentContainer&&g.item[0]!==this.currentItem[0]||(j=this.options.toleranceElement?b(this.options.toleranceElement,g.item):g.item,h||(g.width=j.outerWidth(),g.height=j.outerHeight()),d=j.offset(),g.left=d.left,g.top=d.top)}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(f=this.containers.length-1;f>=0;f--){d=this.containers[f].element.offset(),this.containers[f].containerCache.left=d.left,this.containers[f].containerCache.top=d.top,this.containers[f].containerCache.width=this.containers[f].element.outerWidth(),this.containers[f].containerCache.height=this.containers[f].element.outerHeight()}}return this},_createPlaceholder:function(g){g=g||this;var d,f=g.options;f.placeholder&&f.placeholder.constructor!==String||(d=f.placeholder,f.placeholder={element:function(){var e=g.currentItem[0].nodeName.toLowerCase(),h=b("<"+e+">",g.document[0]).addClass(d||g.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===e?g.currentItem.children().each(function(){b("<td>&#160;</td>",g.document[0]).attr("colspan",b(this).attr("colspan")||1).appendTo(h)}):"img"===e&&h.attr("src",g.currentItem.attr("src")),d||h.css("visibility","hidden"),h},update:function(e,h){(!d||f.forcePlaceholderSize)&&(h.height()||h.height(g.currentItem.innerHeight()-parseInt(g.currentItem.css("paddingTop")||0,10)-parseInt(g.currentItem.css("paddingBottom")||0,10)),h.width()||h.width(g.currentItem.innerWidth()-parseInt(g.currentItem.css("paddingLeft")||0,10)-parseInt(g.currentItem.css("paddingRight")||0,10)))}}),g.placeholder=b(f.placeholder.element.call(g.element,g.currentItem)),g.currentItem.after(g.placeholder),f.placeholder.update(g,g.placeholder)},_contactContainers:function(A){var j,y,i,e,t,q,x,z,w,g,v=null,k=null;for(j=this.containers.length-1;j>=0;j--){if(!b.contains(this.currentItem[0],this.containers[j].element[0])){if(this._intersectsWith(this.containers[j].containerCache)){if(v&&b.contains(this.containers[j].element[0],v.element[0])){continue}v=this.containers[j],k=j}else{this.containers[j].containerCache.over&&(this.containers[j]._trigger("out",A,this._uiHash(this)),this.containers[j].containerCache.over=0)}}}if(v){if(1===this.containers.length){this.containers[k].containerCache.over||(this.containers[k]._trigger("over",A,this._uiHash(this)),this.containers[k].containerCache.over=1)}else{for(i=10000,e=null,g=v.floating||a(this.currentItem),t=g?"left":"top",q=g?"width":"height",x=this.positionAbs[t]+this.offset.click[t],y=this.items.length-1;y>=0;y--){b.contains(this.containers[k].element[0],this.items[y].item[0])&&this.items[y].item[0]!==this.currentItem[0]&&(!g||c(this.positionAbs.top+this.offset.click.top,this.items[y].top,this.items[y].height))&&(z=this.items[y].item.offset()[t],w=!1,Math.abs(z-x)>Math.abs(z+this.items[y][q]-x)&&(w=!0,z+=this.items[y][q]),i>Math.abs(z-x)&&(i=Math.abs(z-x),e=this.items[y],this.direction=w?"up":"down"))}if(!e&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[k]){return}e?this._rearrange(A,e,null,!0):this._rearrange(A,null,this.containers[k].element,!0),this._trigger("change",A,this._uiHash()),this.containers[k]._trigger("change",A,this._uiHash(this)),this.currentContainer=this.containers[k],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[k]._trigger("over",A,this._uiHash(this)),this.containers[k].containerCache.over=1}}},_createHelper:function(g){var d=this.options,f=b.isFunction(d.helper)?b(d.helper.apply(this.element[0],[g,this.currentItem])):"clone"===d.helper?this.currentItem.clone():this.currentItem;return f.parents("body").length||b("parent"!==d.appendTo?d.appendTo:this.currentItem[0].parentNode)[0].appendChild(f[0]),f[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!f[0].style.width||d.forceHelperSize)&&f.width(this.currentItem.width()),(!f[0].style.height||d.forceHelperSize)&&f.height(this.currentItem.height()),f},_adjustOffsetFromHelper:function(d){"string"==typeof d&&(d=d.split(" ")),b.isArray(d)&&(d={left:+d[0],top:+d[1]||0}),"left" in d&&(this.offset.click.left=d.left+this.margins.left),"right" in d&&(this.offset.click.left=this.helperProportions.width-d.right+this.margins.left),"top" in d&&(this.offset.click.top=d.top+this.margins.top),"bottom" in d&&(this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0])&&(d.left+=this.scrollParent.scrollLeft(),d.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&b.ui.ie)&&(d={top:0,left:0}),{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var d=this.currentItem.position();return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var g,d,f,h=this.options;"parent"===h.containment&&(h.containment=this.helper[0].parentNode),("document"===h.containment||"window"===h.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,b("document"===h.containment?document:window).width()-this.helperProportions.width-this.margins.left,(b("document"===h.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(h.containment)||(g=b(h.containment)[0],d=b(h.containment).offset(),f="hidden"!==b(g).css("overflow"),this.containment=[d.left+(parseInt(b(g).css("borderLeftWidth"),10)||0)+(parseInt(b(g).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(b(g).css("borderTopWidth"),10)||0)+(parseInt(b(g).css("paddingTop"),10)||0)-this.margins.top,d.left+(f?Math.max(g.scrollWidth,g.offsetWidth):g.offsetWidth)-(parseInt(b(g).css("borderLeftWidth"),10)||0)-(parseInt(b(g).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(f?Math.max(g.scrollHeight,g.offsetHeight):g.offsetHeight)-(parseInt(b(g).css("borderTopWidth"),10)||0)-(parseInt(b(g).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(h,f){f||(f=this.position);var g="absolute"===h?1:-1,j="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,d=/(html|body)/i.test(j[0].tagName);return{top:f.top+this.offset.relative.top*g+this.offset.parent.top*g-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():d?0:j.scrollTop())*g,left:f.left+this.offset.relative.left*g+this.offset.parent.left*g-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():d?0:j.scrollLeft())*g}},_generatePosition:function(l){var f,j,p=this.options,d=l.pageX,m=l.pageY,k="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(k[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(l.pageX-this.offset.click.left<this.containment[0]&&(d=this.containment[0]+this.offset.click.left),l.pageY-this.offset.click.top<this.containment[1]&&(m=this.containment[1]+this.offset.click.top),l.pageX-this.offset.click.left>this.containment[2]&&(d=this.containment[2]+this.offset.click.left),l.pageY-this.offset.click.top>this.containment[3]&&(m=this.containment[3]+this.offset.click.top)),p.grid&&(f=this.originalPageY+Math.round((m-this.originalPageY)/p.grid[1])*p.grid[1],m=this.containment?f-this.offset.click.top>=this.containment[1]&&f-this.offset.click.top<=this.containment[3]?f:f-this.offset.click.top>=this.containment[1]?f-p.grid[1]:f+p.grid[1]:f,j=this.originalPageX+Math.round((d-this.originalPageX)/p.grid[0])*p.grid[0],d=this.containment?j-this.offset.click.left>=this.containment[0]&&j-this.offset.click.left<=this.containment[2]?j:j-this.offset.click.left>=this.containment[0]?j-p.grid[0]:j+p.grid[0]:j)),{top:m-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():g?0:k.scrollTop()),left:d-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():g?0:k.scrollLeft())}},_rearrange:function(f,h,d,g){d?d[0].appendChild(this.placeholder[0]):h.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?h.item[0]:h.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var j=this.counter;this._delay(function(){j===this.counter&&this.refreshPositions(!g)})},_clear:function(f,h){this.reverting=!1;var d,g=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(d in this._storedCSS){("auto"===this._storedCSS[d]||"static"===this._storedCSS[d])&&(this._storedCSS[d]="")}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}for(this.fromOutside&&!h&&g.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||h||g.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(h||(g.push(function(e){this._trigger("remove",e,this._uiHash())}),g.push(function(e){return function(i){e._trigger("receive",i,this._uiHash(this))}}.call(this,this.currentContainer)),g.push(function(e){return function(i){e._trigger("update",i,this._uiHash(this))}}.call(this,this.currentContainer)))),d=this.containers.length-1;d>=0;d--){h||g.push(function(e){return function(i){e._trigger("deactivate",i,this._uiHash(this))}}.call(this,this.containers[d])),this.containers[d].containerCache.over&&(g.push(function(e){return function(i){e._trigger("out",i,this._uiHash(this))}}.call(this,this.containers[d])),this.containers[d].containerCache.over=0)}if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!h){for(this._trigger("beforeStop",f,this._uiHash()),d=0;g.length>d;d++){g[d].call(this,f)}this._trigger("stop",f,this._uiHash())}return this.fromOutside=!1,!1}if(h||this._trigger("beforeStop",f,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!h){for(d=0;g.length>d;d++){g[d].call(this,f)}this._trigger("stop",f,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){b.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(f){var d=f||this;return{helper:d.helper,placeholder:d.placeholder||b([]),position:d.position,originalPosition:d.originalPosition,offset:d.positionAbs,item:d.currentItem,sender:f?f.element:null}}})})(jQuery);(function(b){b.widget("ui.nestedSortable",b.extend({},b.ui.sortable.prototype,{options:{tabSize:20,disableNesting:"ui-nestedSortable-no-nesting",errorClass:"ui-nestedSortable-error",listType:"ol",maxLevels:0,noJumpFix:0,revertOnError:1},_create:function(){if(this.noJumpFix==false){this.element.height(this.element.height())}this.element.data("sortable",this.element.data("nestedSortable"));return b.ui.sortable.prototype._create.apply(this,arguments)},destroy:function(){this.element.removeData("nestedSortable").unbind(".nestedSortable");return b.ui.sortable.prototype.destroy.apply(this,arguments)},_mouseDrag:function(t){this.position=this._generatePosition(t);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){var r=this.options,s=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-t.pageY<r.scrollSensitivity){this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+r.scrollSpeed}else{if(t.pageY-this.overflowOffset.top<r.scrollSensitivity){this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-r.scrollSpeed}}if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-t.pageX<r.scrollSensitivity){this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+r.scrollSpeed}else{if(t.pageX-this.overflowOffset.left<r.scrollSensitivity){this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-r.scrollSpeed}}}else{if(t.pageY-b(document).scrollTop()<r.scrollSensitivity){s=b(document).scrollTop(b(document).scrollTop()-r.scrollSpeed)}else{if(b(window).height()-(t.pageY-b(document).scrollTop())<r.scrollSensitivity){s=b(document).scrollTop(b(document).scrollTop()+r.scrollSpeed)}}if(t.pageX-b(document).scrollLeft()<r.scrollSensitivity){s=b(document).scrollLeft(b(document).scrollLeft()-r.scrollSpeed)}else{if(b(window).width()-(t.pageX-b(document).scrollLeft())<r.scrollSensitivity){s=b(document).scrollLeft(b(document).scrollLeft()+r.scrollSpeed)}}}if(s!==false&&b.ui.ddmanager&&!r.dropBehaviour){b.ui.ddmanager.prepareOffsets(this,t)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(var i=this.items.length-1;i>=0;i--){var a=this.items[i],q=a.item[0],u=this._intersectsWithPointer(a);if(!u){continue}if(q!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=q&&!b.contains(this.placeholder[0],q)&&(this.options.type=="semi-dynamic"?!b.contains(this.element[0],q):true)){this.direction=u==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(a)){this._rearrange(t,a)}else{break}this._clearEmpty(q);this._trigger("change",t,this._uiHash());break}}var p=(this.placeholder[0].parentNode.parentNode&&b(this.placeholder[0].parentNode.parentNode).closest(".ui-sortable").length)?b(this.placeholder[0].parentNode.parentNode):null;var v=this._getLevel(this.placeholder);var o=this._getChildLevels(this.helper);var n=this.placeholder[0].previousSibling?b(this.placeholder[0].previousSibling):null;if(n!=null){while(n[0].nodeName.toLowerCase()!="li"||n[0]==this.currentItem[0]){if(n[0].previousSibling){n=b(n[0].previousSibling)}else{n=null;break}}}newList=document.createElement(r.listType);this.beyondMaxLevels=0;if(p!=null&&this.positionAbs.left<p.offset().left){p.after(this.placeholder[0]);this._clearEmpty(p[0]);this._trigger("change",t,this._uiHash())}else{if(n!=null&&this.positionAbs.left>n.offset().left+r.tabSize){this._isAllowed(n,v+o+1);if(!n.children(r.listType).length){n[0].appendChild(newList)}n.children(r.listType)[0].appendChild(this.placeholder[0]);this._trigger("change",t,this._uiHash())}else{this._isAllowed(p,v+o)}}this._contactContainers(t);if(b.ui.ddmanager){b.ui.ddmanager.drag(this,t)}this._trigger("sort",t,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(g,f){if(this.beyondMaxLevels){this.placeholder.removeClass(this.options.errorClass);if(this.options.revertOnError){if(this.domPosition.prev){b(this.domPosition.prev).after(this.placeholder)}else{b(this.domPosition.parent).prepend(this.placeholder)}this._trigger("revert",g,this._uiHash())}else{var h=this.placeholder.parent().closest(this.options.items);for(var a=this.beyondMaxLevels-1;a>0;a--){h=h.parent().closest(this.options.items)}h.after(this.placeholder);this._trigger("change",g,this._uiHash())}}b.ui.sortable.prototype._mouseStop.apply(this,arguments)},serialize:function(e){var a=this._getItemsAsjQuery(e&&e.connected);var f=[];e=e||{};b(a).each(function(){var c=(b(e.item||this).attr(e.attribute||"id")||"").match(e.expression||(/(.+)[-=_](.+)/));var d=(b(e.item||this).parent(e.listType).parent("li").attr(e.attribute||"id")||"").match(e.expression||(/(.+)[-=_](.+)/));if(c){f.push((e.key||c[1]+"["+(e.key&&e.expression?c[1]:c[2])+"]")+"="+(d?(e.key&&e.expression?d[1]:d[2]):"root"))}});if(!f.length&&e.key){f.push(e.key+"=")}return f.join("&")},toHierarchy:function(f){f=f||{};var h=f.startDepthCount||0;var g=[];b(this.element).children("li").each(function(){var c=a(b(this));g.push(c)});return g;function a(e){var c=(b(e).attr(f.attribute||"id")||"").match(f.expression||(/(.+)[-=_](.+)/));if(c!=null){var d={id:c[2]};if(b(e).children(f.listType).children("li").length>0){d.children=[];b(e).children(f.listType).children("li").each(function(){var j=a(b(this));d.children.push(j)})}return d}}},toArray:function(h){h=h||{};var a=h.startDepthCount||0;var l=[];var j=2;l.push({item_id:"root",parent_id:"none",depth:a,left:"1",right:(b("li",this.element).length+1)*2});b(this.element).children("li").each(function(){j=i(this,a+1,j)});function k(c,d){return c.left-d.left}l=l.sort(k);return l;function i(e,c,d){right=d+1;if(b(e).children(h.listType).children("li").length>0){c++;b(e).children(h.listType).children("li").each(function(){right=i(b(this),c,right)});c--}id=(b(e).attr(h.attribute||"id")).match(h.expression||(/(.+)[-=_](.+)/));if(c===a+1){pid="root"}else{parentItem=(b(e).parent(h.listType).parent("li").attr("id")).match(h.expression||(/(.+)[-=_](.+)/));pid=parentItem[2]}if(id!=null){l.push({item_id:id[2],parent_id:pid,depth:c,left:d,right:right})}return d=right+1}},_clear:function(g,f){b.ui.sortable.prototype._clear.apply(this,arguments);for(var a=this.items.length-1;a>=0;a--){var h=this.items[a].item[0];this._clearEmpty(h)}return true},_clearEmpty:function(a){if(a.children[1]&&a.children[1].children.length==0){a.removeChild(a.children[1])}},_getLevel:function(a){var e=1;if(this.options.listType){var f=a.closest(this.options.listType);while(!f.is(".ui-sortable")){e++;f=f.parent().closest(this.options.listType)}}return e},_getChildLevels:function(i,g){var j=this,h=this.options,a=0;g=g||0;b(i).children(h.listType).children(h.items).each(function(d,c){a=Math.max(j._getChildLevels(c,g+1),a)});return g?a+1:a},_isAllowed:function(a,f){var e=this.options;if(a==null||!(a.hasClass(e.disableNesting))){if(e.maxLevels<f&&e.maxLevels!=0){this.placeholder.addClass(e.errorClass);this.beyondMaxLevels=f-e.maxLevels}else{this.placeholder.removeClass(e.errorClass);this.beyondMaxLevels=0}}else{this.placeholder.addClass(e.errorClass);if(e.maxLevels<f&&e.maxLevels!=0){this.beyondMaxLevels=f-e.maxLevels}else{this.beyondMaxLevels=1}}}}));b.ui.nestedSortable.prototype.options=b.extend({},b.ui.sortable.prototype.options,b.ui.nestedSortable.prototype.options)})(jQuery);(function(c){var d={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(a){for(var h=0;h<a.length;h++){var g=a[h].string;var b=a[h].prop;this.versionSearchString=a[h].versionSearch||a[h].identity;if(g){if(g.indexOf(a[h].subString)!=-1){return a[h].identity}}else{if(b){return a[h].identity}}}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(b==-1){return}return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};d.init();c.client={os:d.OS,browser:d.browser}})(jQuery);jQuery(function(c){setTimeout(function(){jQuery("#toplevel_page_admin-menu-tree-page-tree_main").addClass("wp-menu-open")},100);c("li.admin-menu-tree-page-filter input").keyup(function(a){var e=c(this).closest("ul.admin-menu-tree-page-tree");e.find("li").hide();e.find("li.admin-menu-tree-page-tree_headline,li.admin-menu-tree-page-filter").show();var b=c(this).val();var j="li:AminMenuTreePageContains('"+b+"')";var k=e.find(j);if(k.length>0||b!==""){e.find("div.admin-menu-tree-page-filter-reset").fadeIn("fast");e.unhighlight()}if(b===""){e.find("div.admin-menu-tree-page-filter-reset").fadeOut("fast")}e.highlight(b);k.show();k.each(function(h,f){var g=f.parentNode;if(g){g=c(g);g.parent().parent().addClass("admin-menu-tree-page-view-opened").removeClass("admin-menu-tree-page-view-closed");g.show()}});var l=e.find("div.admin-menu-tree-page-filter-nohits");if(k.length===0){l.show()}else{l.hide()}});c("div.admin-menu-tree-page-filter-reset").click(function(){var a=c(this);var b=a.closest("ul.admin-menu-tree-page-tree");b.find("li").fadeIn("fast");a.fadeOut("fast");a.closest("li.admin-menu-tree-page-filter").find("input").val("").focus();b.unhighlight();b.find("div.admin-menu-tree-page-filter-nohits").hide()});c("li.admin-menu-tree-page-filter label, li.admin-menu-tree-page-filter input").click(function(){var a=c(this);a.closest("li.admin-menu-tree-page-filter").find("label").hide();a.closest("li.admin-menu-tree-page-filter").find("input").focus()});var d=jQuery("ul.admin-menu-tree-page-tree");d.find("li.admin-menu-tree-page-view-has-childs > div").after("<div class='admin-menu-tree-page-expand' title='Show/Hide child pages' />");d.on("click","div.admin-menu-tree-page-expand",function(e){e.preventDefault();var a=c(this);var b=a.closest("li");var m=b.find("a:first");var o=b.find("ul:first");var n=false;if(o.is(":visible")){o.slideUp(function(){b.addClass("admin-menu-tree-page-view-closed").removeClass("admin-menu-tree-page-view-opened")})}else{o.slideDown(function(){b.addClass("admin-menu-tree-page-view-opened").removeClass("admin-menu-tree-page-view-closed")});n=true}var p=m.attr("href").match(/\?post=([\d]+)/)[1];var l=c.inArray(p,admin_menu_tree_page_view_opened_posts);if(l>-1){admin_menu_tree_page_view_opened_posts=admin_menu_tree_page_view_opened_posts.splice(l+1,1)}if(n){admin_menu_tree_page_view_opened_posts.push(p)}admin_menu_tree_page_view_save_opened_posts()});d.on("mouseenter mouseleave","li div.amtpv-linkwrap:first-child",function(e){var k=c(this);var n=k.closest("li");var a=n.find("div.amtpv-editpopup:first");var m=n.find("div.amtpv-linkwrap:first");if(e.type=="mouseenter"||e.type=="mouseover"){var l=k.closest("ul.admin-menu-tree-page-tree");if(l.find("div.amtpv-editpopup-is-working").length>0){}else{l.find("div.amtpv-editpopup").removeClass("amtpv-editpopup-hover");l.find("div.amtpv-linkwrap").removeClass("amtpv-linkwrap-hover");a.addClass("amtpv-editpopup-hover");m.addClass("amtpv-linkwrap-hover")}}else{if(e.type=="mouseleave"||e.type=="mouseout"){var b=true;if(e.relatedTarget&&e.relatedTarget.id=="adminmenushadow"){b=false}if(m.hasClass("amtpv-editpopup-is-working")){b=false}if(b){a.removeClass("amtpv-editpopup-hover");m.removeClass("amtpv-linkwrap-hover")}}}});d.on("mouseenter mouseleave","div.amtpv-editpopup",function(b){var e=c(this);var j=e.closest("li");var a=j.find("div.amtpv-editpopup:first");var i=j.find("div.amtpv-linkwrap:first");if(b.type=="mouseenter"||b.type=="mouseover"){e.addClass("amtpv-editpopup-hover-hover")}else{if(b.type=="mouseleave"||b.type=="mouseout"){if(i.hasClass("amtpv-editpopup-is-working")){}else{e.removeClass("amtpv-editpopup-hover-hover")}}}});d.on("click","div.amtpv-editpopup-edit, div.amtpv-editpopup-view",function(b){b.preventDefault();var h=c(this);var e=h.data("link");var a=false;if((c.client.os=="Mac"&&(b.metaKey||b.shiftKey))||(c.client.os!="Mac"&&b.ctrlKey)){a=true}if(a){window.open(e)}else{document.location=e}});d.on("click","div.amtpv-editpopup-add-after, div.amtpv-editpopup-add-inside",function(o){var a=c(this);var p=a.closest("a").data("post-id");var q=a.closest("div.amtpv-editpopup");var n=q.closest("div.amtpv-linkwrap");var r=q.find("div.amtpv-editpopup-add");var b=q.find("div.amtpv-editpopup-editview");q.find("> div").hide();n.addClass("amtpv-editpopup-is-working");var e="after";if(a.hasClass("amtpv-editpopup-add-inside")){e="inside"}q.find("form.amtpv-editpopup-addpages").remove();var m=c("<form />").addClass("amtpv-editpopup-addpages").insertAfter(r);m.append("<div class='amtpv-editpopup-addpages-headline'>Add new page(s)</div>");m.append(c("<input type='hidden' class='amtpv-editpopup-addpages-type' value='"+e+"' />"));if(e=="after"){m.append(c("<div class='amtpv-editpopup-addpages-position'><input checked='checked' type='radio' name='amtpv-editpopup-addpages-position' id='amtpv-editpopup-addpages-position-after' value='after' /><label for='amtpv-editpopup-addpages-position-after'>After</label> <input type='radio' name='amtpv-editpopup-addpages-position' id='amtpv-editpopup-addpages-position-inside' value='inside' /><label for='amtpv-editpopup-addpages-position-inside'>Inside</label> </div"))}else{if(e=="inside"){m.append(c("<div class='amtpv-editpopup-addpages-position'><input type='radio' name='amtpv-editpopup-addpages-position' id='amtpv-editpopup-addpages-position-after' value='after' /><label for='amtpv-editpopup-addpages-position-after'>After</label> <input checked='checked' type='radio' name='amtpv-editpopup-addpages-position' id='amtpv-editpopup-addpages-position-inside' value='inside' /><label for='amtpv-editpopup-addpages-position-inside'>Inside</label> </div"))}}m.append(c("<div class='amtpv-editpopup-addpages-publish'><label for='amtpv-editpopup-addpages-publish-select'>Status</label><select id='amtpv-editpopup-addpages-publish-select' name='status'><option value='publish'>Published</option><option value='pending'>Pending Review</option><option value='draft' selected='selected'>Draft</option></select></div"));m.append(c("<div class='amtpv-editpopup-addpages-names'><label class='amtpv-editpopup-addpages-label'>Name(s)</label>"));m.append(c("<ul class='amtpv-editpopup-addpages-names-ul'><li><span></span><input class='amtpv-editpopup-addpages-name' type='text' value=''/></li></ul>"));m.append(c("<div class='amtpv-editpopup-addpages-submit'><input type='submit' class='button-primary' value='Add' /> or <a href='#' class='amtpv-editpopup-addpages-cancel'>cancel</a></div>"));m.find(".amtpv-editpopup-addpages-name").focus();m.find("ul.amtpv-editpopup-addpages-names-ul").sortable({xaxis:"y",containment:"parent",forceHelperSize:true,forcePlaceholderSize:true,handle:"span:first",placeholder:"ui-state-highlight"});return});d.on("click","div.amtpv-editpopup-addpages-addpage a",function(a){a.preventDefault();var e=c(this);var b=c("<li><span></span><input class='amtpv-editpopup-addpages-name' type='text' value=''/></li>");e.parent().prev("ul.amtpv-editpopup-addpages-names-ul").append(b);b.find("input").focus()});d.on("keyup","input.amtpv-editpopup-addpages-name",function(a){var j=c(this);var k=j.closest("ul");var l=j.closest("li");var e=(l.index()==k.find("li").length-1);if(e&&j.val()!==""){var b=c("<li class='hidden'><span></span><input class='amtpv-editpopup-addpages-name' type='text' value=''/></li>");k.append(b);b.show()}});d.on("click","a.amtpv-editpopup-addpages-cancel",function(a){a.preventDefault();var b=c(this),h=b.closest("div.amtpv-editpopup"),e=h.closest("div.amtpv-linkwrap");h.find(".amtpv-editpopup-addpages").hide().remove();h.find("> div").show();e.removeClass("amtpv-editpopup-is-working")});d.on("submit","form.amtpv-editpopup-addpages",function(m){m.preventDefault();var a=c(this);var o=a.closest("div.amtpv-linkwrap").data("post-id");var r=a.closest("div.amtpv-editpopup");var e=r.find(".amtpv-editpopup-addpages-name");var q=[];e.each(function(f,h){var g=c.trim(c(h).val());if(g){q.push(c(h).val())}});if(q.length===0){alert("Please enter a name for the new page");return false}r.find("div.amtpv-editpopup-addpages-submit input").val("Adding...");var b=r.find("input[name=amtpv-editpopup-addpages-position]:checked").val();var p=r.find("#amtpv-editpopup-addpages-publish-select").val();var n={action:"admin_menu_tree_page_view_add_page",pageID:o,type:b,page_titles:q,post_type:"page",post_status:p};jQuery.post(ajaxurl,n,function(g){if(g!="0"){var f=false;if(f){window.open(g)}else{document.location=g}}})});c("ul.admin-menu-tree-page-tree, ul.admin-menu-tree-page-tree ul").sortable({axis:"y",containment:"parent",forceHelperSize:true,forcePlaceholderSize:true,delay:20,distance:5,xhandle:"span.amtpv-draghandle",revert:true,start:function(b,a){var f=c(a.item);f.data("startindex",f.index())},update:function(y,s){var b=c(s.item);var p=b.find("a:first");var x=p.data("post-id");var w=b.prev();var a;var r;if(w.length>0&&!w.hasClass("admin-menu-tree-page-filter")){a=w;r="above"}else{var v=b.next();a=v;r="below"}var t=c(a).find("a:first").data("post-id");var z=b.data("startindex");var u=b.index();var q;if(z>u){q="up"}else{q="down"}c.post(ajaxurl,{action:"admin_menu_tree_page_view_move_page",post_to_update_id:x,direction:q,aboveOrNextPostID:t},function(e){})}});d.on("click",".admin-menu-tree-page-tree_headline",function(){var a=c(this);var b=a.closest("ul");var f=b.find("li").not(".admin-menu-tree-page-tree_headline");if(b.hasClass("admin-menu-tree-page-view-closed")){b.addClass("admin-menu-tree-page-view-opened").removeClass("admin-menu-tree-page-view-closed");f.show()}else{b.removeClass("admin-menu-tree-page-view-opened").addClass("admin-menu-tree-page-view-closed");f.hide()}})});function admin_menu_tree_page_view_save_opened_posts(){jQuery.cookie("admin-menu-tree-page-view-open-posts",admin_menu_tree_page_view_opened_posts.join(","))}var admin_menu_tree_page_view_opened_posts=jQuery.cookie("admin-menu-tree-page-view-open-posts")||"";admin_menu_tree_page_view_opened_posts=admin_menu_tree_page_view_opened_posts.split(",");jQuery.expr[":"].AminMenuTreePageContains=function(f,e,a){return(f.textContent||f.innerText||"").toLowerCase().indexOf(a[3].toLowerCase())>=0};